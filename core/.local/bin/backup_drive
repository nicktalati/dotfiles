#!/bin/bash

readonly source_vault="$HOME/crypt"
readonly dest="/mnt/backup"

if ! mountpoint -q "/mnt/backup"; then
    echo "Drive not mounted. Run 'mount_drive' first"
    exit 1
fi

echo "Starting backup..."

mkdir -p "$dest"

echo "Syncing vault..."
rsync -av --delete "$source_vault/" "$dest/crypt/"

echo "Backup complete."
sync
